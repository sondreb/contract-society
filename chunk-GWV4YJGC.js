import{Jc as h,Ob as n,Pb as o,Qb as d,Ub as f,d as a,dc as i,pb as u}from"./chunk-244ZNKJ2.js";var g=class c{login(){return a(this,null,function*(){debugger;try{let e=yield fetch("https://eurmtl.me/remote/sep07/auth/init",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domain:window.location.hostname,nonce:Math.random().toString(36).substring(2)})});debugger;if(!e.ok)throw new Error("Response was not OK");let{qr_path:t,uri:s,status_url:l}=yield e.json();document.getElementById("qrcode").innerHTML=`
        <img src="${t}" alt="QR Code">
        <p>Or use the link: <a href="${s}">SEP-07</a></p>
      `;function r(){return a(this,null,function*(){try{let p=yield(yield fetch(l)).json();p.authenticated?alert(`Authentication successful!
Address: ${p.client_address}`):setTimeout(r,5e3)}catch(m){console.error("Status check error:",m),setTimeout(r,5e3)}})}r()}catch(e){console.error(e),alert("An error occurred while initializing authentication")}})}static \u0275fac=function(t){return new(t||c)};static \u0275cmp=u({type:c,selectors:[["app-profile"]],decls:7,vars:0,consts:[["id","qrcode"],[3,"click"],["href",`
  web+stellar:pay?destination=GDMBM7P2ZVD64DSMQJIR67CZFWU7EQRI4YMRLZ2XOYT3V7YUBGZ4RXHF&amount=1&asset_code=EURMTL&asset_issuer=GACKTN5DAZGWXRWB2WLM6OPBDHAMT6SJNGLJZPQMEZBUR4JUGBX2UK7V&memo=sign&memo_type=text`]],template:function(t,s){t&1&&(n(0,"p"),i(1,"Profile component works!"),o(),d(2,"div",0),n(3,"button",1),f("click",function(){return s.login()}),i(4,"Login"),o(),n(5,"a",2),i(6,"Login with Sunce Wallet"),o())},dependencies:[h],encapsulation:2})};export{g as ProfileComponent};
